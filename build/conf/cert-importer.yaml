component: npu-exporter
product: MindXDL
systemEnv:
  - workspace
  - processor
compile:
  input:
    dependency:
      #      - name: CMK
      #        version:
      #        offering: MindXDL
      #        type: self-component
      #        src: '*'
      #        des: self-component/ascend-volcano-plugin
      - name: huawei_secure_c
        version: 1.0
        type: opensource
      - name: openssl
        version: 1.0
        type: opensource
      - name: KMC_Java
        version: 1.0
        type: opensource
      - name: KMC
        version: 1.0
        type: opensource
    files:
      exclude:
        - remove:
            - "{{ systemEnv.workspace }}/{{ component}}/output/cert-importer/"
  process:
    language: go
    compilePath: "{{ systemEnv.workspace }}/npu-exporter/cmd/importer/"
    parameters: [
    [ "mod", "mod" ],
    [ "buildmode", "pie" ],
    [ "ldflags", "-s -extldflags=-Wl,-z,now  -X huawei.com/npu-exporter/versions.BuildName=cert-importer -X huawei.com/npu-exporter/versions.BuildVersion={{version}}_linux-{{systemEnv.processor}}" ],
    [ "o", "cert-importer" ],
    ['trimpath',""],
    ]
  output:

